@inject NavigationManager nav;
@inject NavigationHistory history;
@inherits LayoutComponentBase;
@implements IDisposable;

<div class="w3-main">
    @Body
</div>

<Notification></Notification>

@code {

    protected override void OnInitialized() {
        // Subscribe to the event
        nav.LocationChanged += onLocationChanged;
        base.OnInitialized();
    }

    void IDisposable.Dispose() {
        // Unsubscribe from the event when our component is disposed
        nav.LocationChanged -= onLocationChanged;
    }

    void onLocationChanged(object sender, LocationChangedEventArgs e) {
        var uri = new Uri(e.Location);
        history.Push(uri);
    }

}
